<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

		<title>Force Layout</title>

        <link rel="stylesheet" href="../stylesheets/styles.css">
        <link rel="stylesheet" href="../stylesheets/iframe.css">

        <script type="text/javascript" src="../scripts/sylvester.js"></script>
        <script type="text/javascript" src="graph.js"></script>
        <script src="http://d3js.org/d3.v3.min.js"></script>

	</head>

	<body>
        <div class="wrapper">
            <header>
	            <h1>Kris Harbold</h1>
	
	            <!-- Social Accounts Here -->
	
	            <!-- Twitter -->
	            <div class="accordion">
	                <a href="http://j.mp/17vGPmC">
	                    <h3 class="accordion-heading social" id="twitter">
	                        <img src="../images/twitter_bird.png">Twitter</h3>
	                </a>
	            </div>
	
	            <!-- GitHub -->
	            <div class="accordion">
	                <a href="http://j.mp/16kjeV6">
	                    <h3 class="accordion-heading social" id="github">
	                        <img src="../images/blacktocat.png">Github</h3>
	                </a>
	            </div>
	
	            <!-- LinkedIn -->
	            <div class="accordion">
	                <a href="http://j.mp/16kjljw">
	                    <h3 class="accordion-heading social" id="linkedin">
	                        <img src="../images/in.png">LinkedIn</h3>
	                </a>
	            </div>
	
	            <!-- Contact -->
	            <div class="accordion">
	                <a href="mailto:harbolkn@gmail.com">
	                    <h3 class="accordion-heading social" id="email">
	                        <img src="../images/mail.png">Contact</h3>
	                </a>
	            </div>

                <br></br>
	            <a href="/">← Back to Homepage</a><br />
	            <a href="/portfolio.html">← Back to Portfolio</a>
	
            </header>
            <section>
            <div style="padding-right: 150px;">
                <h1>Social Network Force Diagram</h1> <p></p> <p>January 6, 2014</p> <iframe src="http://kharbold.com/network_visualization" height="600px" scrolling="no"> </iframe> <p></p> <p> <a style="position:relative;top:6px;" href="/network_visualization" target="_blank">Open in a new window.</a> </p>

                <p></p>

                <div class="readme">
                    <h3>Intro</h3>
                    <p>The visualization above shows your Facebook network. The data to render it is extracted using the Facebook API and Facebook Query Language (FQL). Each node in the network represents a friend, each edge a connection between those friends. They are visualized in a force type layout, rendered using D3.js. The wait of each edge, or the length of the edge, represents how interconnected a node is to another node.  Nodes with share a large number of mutual connections will have higher waits than those with fewer. These waits move the layout into social clusters, tending to represent different social groups you may be a part of. The size and color of each node is determined by it's Page Rank value, a value that estimates how relevant, or central, that node is, to connecting parts of the network.</p>

                    <h3>Facebook API</h3>
                    <p></p>

                    <h3>Force Layout in d3</h3>
                    <p>D3.js, the popular Javascript library used for easily building beautiful data drive designs, was used to create the force directed graph, making up the core of the visualization.  D3 contains several different layouts, one of which is called the Force Layout.  This layout simulated forces between nodes in the data, with each node being considered a charged particle.  Nodes can either repel or attract each other, while edges prevent repulsive forces. This causes the graph to become naturally structured, keeping heavily interconnected nodes clustered, and less connected nodes to separate.</p>

                    <h3>PageRank</h3>
                    <p>PageRank is an algorithm created by Google for determining the importance of pages on the internet.  It is used by the search company to deliver pages that are the most relevant to a user's search terms.  Its application however can be expanding to analyze any linked network, determining the most important nodes within the network.  In the visualization PageRank is used to size nodes, showing their importance to the network.</p>
                    
                    <p>A node is considered "important" if there is a high likelihood that a person randomly traversing the graph ends up at that node.  This likelihood is represented by the node's PageRank, a value between 0 to 1.  The rank of each node is calculated using voting theory.  An edge between node A to node B is considered a vote by A for B.  Votes can be represented in an adjacency matrix where each row and column represents a pair of nodes.  A value of 1 for pair {A,B} means an edge exists from A to B.  Because Facebook is an undirected graph, or a graph in which users share a mutual relationship with one another, each pair {A,B} = 1 must also have the pair {B,A} = 1.  An example of such a matrix is shown below.</p>

                    <div class="graphic" id="a_matrix"></div>
                    <script>
                        var graph = $M([
                            [0, 1, 0, 0, 1, 0],
                            [1, 0, 1, 0, 1, 0],
                            [0, 1, 0, 1, 0, 0],
                            [0, 0, 1, 0, 1, 1],
                            [1, 1, 0, 1, 0, 0],
                            [0, 0, 0, 1, 0, 0]
                        ]);

                        draw_graph("#a_matrix", graph);

                    </script>

                    <p>The likelihood with which PageRank is based is actually just a probability.  To make the adjacency matrix represent probability the matrix is transformed into a Stochastic Matrix.  Each row in the matrix represents being on a node, the value of each column for that row is the probability of moving to that column's node from the row node.  So say we're at node A, and node A is connected to nodes B, D, and E.  The probability of moving to any of these nodes from A is equal for each node.  Since there are 3 edges coming from A, the probability of traversing any of these edges is 1/3.  Therefore, the value for the matrix pairs {A,B}, {A,D}, and {A,E} all equal 0.3.  Such a matrix is shown below.</p>

                    <div class="graphic" id="s_matrix"></div>
                    <script>
                        var graph = $M([
                            [0, 0.5, 0, 0, 0.5, 0],
                            [0.3, 0, 0.3, 0, 0.3, 0],
                            [0, 0.5, 0, 0.5, 0, 0],
                            [0, 0, 0.3, 0, 0.3, 0.3],
                            [0.3, 0.3, 0, 0.3, 0, 0],
                            [0, 0, 0, 1, 0, 0]
                        ]);

                        draw_graph("#s_matrix", graph);

                    </script>

                    <p></p>

                    <h3>Challenges</h3>
                    <ul>
                    </ul>

                    <h3>Future Development</h3>
                    <ul>
                    </ul>

                </div>
            </div>
            </section>
        </div>
	</body>
</html>
